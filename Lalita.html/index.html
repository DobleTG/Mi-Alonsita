<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1024, initial-scale=0.35, maximum-scale=1.0, user-scalable=yes">
<title>Mi Alonsita ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,500;1,500&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  min-height:100vh;
  font-family:'Segoe UI',system-ui,sans-serif;
  background:#0d0d0d;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  padding:20px;
}

/* FONDO */
.fondo{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle, rgba(0,0,0,.35), rgba(0,0,0,.85)),
    url('recuerdo.jpg') center/110% no-repeat;
  opacity:0;
  transform:scale(1.05);
  transition:opacity 3.5s ease, transform 4.5s ease;
  z-index:-2;
}
body.abierto .fondo{
  opacity:0.45;
  transform:scale(1);
}

/* VIDEO FONDO */
.video-fondo{
  position:fixed;
  inset:0;
  object-fit:cover;
  opacity:0;
  transition:opacity 3s ease;
  z-index:-3;
  pointer-events:none;
}
.video-activo{
  opacity:0.5;
}

/* TEXTO LUMINOSO */
#nombre-luz{
  position:fixed;

  /* anclaje real al borde visible */
  bottom: calc(env(safe-area-inset-bottom, 0px) + 12px);
  right:  calc(env(safe-area-inset-right, 0px) + 14px);

  font-size:1.2em;
  font-family:'Times New Roman',serif;
  color:#ffd88a;
  opacity:0;
  pointer-events:none;

  text-shadow:
    0 0 10px rgba(255,220,150,.6),
    0 0 22px rgba(255,200,120,.9),
    0 0 38px rgba(255,170,80,1);

  transition:opacity 2.5s ease, font-size 2.5s ease;
  z-index:999;
}


.letra-suave{
  opacity:0;
  filter:blur(4px);
  display:inline-block;
  transition:
    opacity .45s ease,
    filter .6s ease;
}

.letra-suave.visible{
  opacity:1;
  filter:blur(0);
}


/* PALPITAR */
.palpitar{
  animation:palpitar 4.5s ease-in-out infinite;
}
@keyframes palpitar{
  0%,100%{ transform:scale(1); }
  50%{ transform:scale(1.04); }
}

/* CONTENEDOR */
.wrap{
  width:100%;
  max-width:420px;
  perspective:1600px;
  position:relative;
  z-index:5;
}

/* LUZ */
.luz{
  position:absolute;
  inset:-60%;
  background:radial-gradient(circle,rgba(255,220,160,.55),transparent 70%);
  opacity:0;
  pointer-events:none;
}
.abierto ~ .luz{
  opacity:1;
  animation:respirar 6s ease-in-out infinite;
}
@keyframes respirar{
  0%,100%{ opacity:.4; }
  50%{ opacity:.75; }
}

/* SOBRE */
.sobre{
  position:relative;
  width:100%;
  aspect-ratio:16/10;
  background:url('sobre.jpg') center/cover no-repeat;
  border-radius:14px;
  box-shadow:0 30px 65px rgba(0,0,0,.65);
  overflow:hidden;
  transform-style:preserve-3d;
}

/* TAPA */
.tapa{
  position:absolute;
  top:0; left:0;
  width:100%;
  height:50%;
  background:url('sobre.jpg') center top/cover no-repeat;
  transform-origin:top;
  transition:transform 1.8s cubic-bezier(.2,.8,.2,1);
  z-index:6;
}

/* SELLO */
.sello{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:78px;
  height:78px;
  background:radial-gradient(circle at 30% 30%,#c0392b,#7a1510);
  border-radius:50%;
  box-shadow:
    inset -6px -6px 10px rgba(0,0,0,.45),
    inset 3px 3px 6px rgba(255,255,255,.2),
    0 10px 25px rgba(0,0,0,.6);
  z-index:7;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#ffd6c9;
  font-family:'Times New Roman',serif;
  font-size:22px;
  letter-spacing:2px;
  transition:opacity .7s ease, transform .7s ease;
}
.sello .amp{
  font-size:0.65em;
  margin:0 4px;
  opacity:0.85;
}

/* CARTA */
.carta{
  position:absolute;
  inset:10px;
  background:linear-gradient(
    rgba(253,247,236,0.85),
    rgba(253,247,236,0.95)
  );
  border-radius:10px;
  padding:28px 22px;
  transform:translateY(95%);
  opacity:0;
  transition:transform 1.6s ease, opacity 1.4s ease;
  box-shadow:0 12px 30px rgba(0,0,0,.4);
  overflow-y:auto;
}

h1{ margin:0 0 14px; font-size:1.6em; color:#5a2a3c; }
p{ margin:0; font-size:1.1em; color:#4a2b2b; line-height:1.75; white-space:pre-line; }

#firma{
  margin-top:26px;
  font-style:italic;
  font-weight:bold;
  opacity:0;
  transform:translateY(10px);
  transition:opacity 1.6s ease, transform 1.6s ease;
}

/* SEGUNDA CARTA */
.carta2{
  position:absolute;
  inset:10px;
  background:linear-gradient(
    rgba(253,247,236,0.85),
    rgba(253,247,236,0.95)
  );
  border-radius:10px;
  padding:28px 22px;
  transform:translateY(95%);
  opacity:0;
  transition:transform 1.6s ease, opacity 1.4s ease;
  box-shadow:0 12px 30px rgba(0,0,0,.4);
  overflow-y:auto;
  pointer-events:none;
}

/* ABIERTO */
.abierto .tapa{ transform:rotateX(-170deg); }
.abierto .carta{ transform:translateY(0); opacity:1; }
.abierto .sello{ opacity:0; transform:translate(-50%,-50%) scale(.6); }

/* BOT√ìN */
button{
  margin:26px auto 0;
  display:block;
  padding:16px 36px;
  border-radius:34px;
  border:none;
  background:linear-gradient(135deg,#ff758c,#ff7eb3);
  color:white;
  font-size:1.05em;
  cursor:pointer;
  box-shadow:0 12px 28px rgba(255,120,160,.65);
  transition:opacity .6s ease;
  font-family:'Playfair Display', serif;
  letter-spacing:.04em;
}
button.hide{ opacity:0; pointer-events:none; }

/* BOTONES SECUNDARIOS */
#btn2,#btn3{
  display:none;
}

/* ESTRELLAS */
.estrella{
  position:fixed;
  top:-40px;
  width:10px;
  height:10px;
  border-radius:50%;
  background:gold;
  box-shadow:
    0 0 10px gold,
    0 0 20px rgba(255,200,120,.9),
    0 0 30px rgba(255,170,80,.8);
  animation:caer linear infinite;
  z-index:2;
}
@keyframes caer{
  to{ transform:translateY(110vh); }
}

/* GLOBOS DE CANTOYA */
.globo{
  position:fixed;
  bottom:-120px;
  width:90px;
  pointer-events:none;
  animation:flotar linear infinite;
  z-index:3;
  filter:drop-shadow(0 0 14px rgba(255,180,80,.8));
}
@keyframes flotar{
  from{ transform:translateY(0) translateX(0); }
  to{ transform:translateY(-120vh) translateX(var(--deriva)); }
}

/* INFINITO LUMINOSO */
.infinito{
  margin-left:6px;
  color:#ffd88a;
  text-shadow:
    0 0 6px rgba(255,220,150,.7),
    0 0 14px rgba(255,200,120,.9),
    0 0 24px rgba(255,170,80,1);
  animation:latidoInfinito 3.8s ease-in-out infinite;
}
@keyframes latidoInfinito{
  0%,100%{ opacity:.7; transform:scale(1); }
  50%{ opacity:1; transform:scale(1.15); }
}
/* ===============================
   AJUSTES ESPEC√çFICOS M√ìVIL
   iPhone + Android
   =============================== */

/* Base m√≥vil (todos) */
@media (max-width: 480px){

  body{
    padding:12px;
    align-items:flex-start;
  }

  .wrap{
    max-width:100%;
    perspective:1200px;
  }

  .sobre{
    aspect-ratio: 4 / 3;
    border-radius:12px;
  }

  .carta,
  .carta2{
    padding:18px 16px;
  }

  h1{
    font-size:1.35em;
  }

  p{
    font-size:1em;
    line-height:1.6;
  }

  button{
    padding:14px 26px;
    font-size:0.95em;
  }

  #nombre-luz{
    bottom:14px;
    right:16px;
    font-size:0.9em;
  }

  .video-fondo{
    opacity:0.35;
  }
}

/* ===============================
   iPhone (Safari iOS)
   =============================== */
@supports (-webkit-touch-callout: none){

  body{
    font-family:-apple-system, BlinkMacSystemFont, "San Francisco", "Helvetica Neue", sans-serif;
  }

  .wrap{
    transform:scale(0.94);
  }

  .carta,
  .carta2{
    border-radius:14px;
  }

  h1{
    letter-spacing:0.02em;
  }

  button{
    border-radius:30px;
  }

  /* Evita saltos raros de viewport en iOS */
  .video-fondo{
    height:100vh;
    width:100vw;
  }
}

/* ===============================
   Android (Chrome / WebView)
   =============================== */
@media (max-width: 480px) and (pointer: coarse){

  body{
    font-family: 'Segoe UI', Roboto, sans-serif;
  }

  .wrap{
    transform:scale(0.97);
  }

  p{
    font-size:1.02em;
  }

  button{
    box-shadow:0 10px 24px rgba(255,120,160,.55);
  }
  /* FECHA DORADA RESPIRANDO */
.fecha-dorada{
  font-family:'Times New Roman', serif;
  color:#ffd88a;
  font-size:1.45em;
  opacity:0;
  display:inline-flex;
  align-items:center;
  gap:6px;

  text-shadow:
    0 0 8px rgba(255,220,150,.5),
    0 0 18px rgba(255,200,120,.7),
    0 0 30px rgba(255,170,80,.9);

  filter:blur(6px);
  transition:
    opacity 2.2s ease,
    filter 2.6s ease;
}

/* RESPIRACI√ìN */
.fecha-dorada.respirar{
  animation:respirarFecha 5.5s ease-in-out infinite;
}

@keyframes respirarFecha{
  0%,100%{
    opacity:.75;
    transform:scale(1);
    text-shadow:
      0 0 8px rgba(255,220,150,.4),
      0 0 18px rgba(255,200,120,.6),
      0 0 30px rgba(255,170,80,.8);
  }
  50%{
    opacity:1;
    transform:scale(1.06);
    text-shadow:
      0 0 12px rgba(255,230,170,.7),
      0 0 26px rgba(255,210,140,.9),
      0 0 42px rgba(255,180,90,1);
  }
}

/* INFINITO */
.fecha-dorada .infinito{
  font-size:1.15em;
}
}

</style>
</head>

<body>

<div class="fondo" id="fondo"></div>
<video id="videoFondo" class="video-fondo" src="recuerdo2.mp4" autoplay loop muted playsinline></video>
<div id="nombre-luz"></div>

<div class="wrap">
  <div class="sobre" id="sobre">
    <div class="tapa"></div>

    <div class="sello">
      L <span class="amp">&amp;</span> S
    </div>

    <!-- CARTA 1 -->
    <div class="carta" id="carta1">
      <h1>Mi Alonsita ‚ù§Ô∏è</h1>
      <p id="mensaje"></p>
      <p id="firma">Por siempre... tu alonsito</p>
    </div>

    <!-- CARTA 2 -->
    <div class="carta2" id="carta2">
      <h1>Para ti, mi amor ‚ù§Ô∏è</h1>
      <p id="mensaje2"></p>
      <p id="firma2" style="margin-top:26px;font-style:italic;font-weight:bold; opacity:0; transform:translateY(10px); transition:opacity 1.6s ease, transform 1.6s ease;">
  Con todo mi coraz√≥n... tu alonsito
    </p>

    </div>
  </div>

  <div class="luz"></div>

  <button id="btn" onclick="abrir()">T√≥came para abrir üíå</button>
  <button id="btn2" onclick="abrirSegunda()">A√∫n no se acaba üíñ</button>
  <button id="btn3" onclick="volverPrimera()">Volver</button>

  <audio id="music" src="musica.mp3"></audio>
  <audio id="music2" src="musica2.mp3"></audio>
  <audio id="papel" src="papel.mp3"></audio>
  <audio id="pluma" src="pluma.mp3"></audio>
</div>

<script>
const texto=`S√© que es un "regalo" un poco extra√±o
pero sabes se me ocurren cosas locas...

Porque contigo aprend√≠
que amar tambi√©n es calma,
hogar, risa, refugio,
y promesa.

Promesa de cuidarte,
de escucharte,
de caminar contigo
en lo bueno y en lo dif√≠cil.

Gracias por existir,
por elegirme,
por ser t√∫.

Te amo m√°s de lo que
las palabras alcanzan.

Feliz cumplea√±os,
Mi Lalita... ‚ù§Ô∏è`;

const texto2=`Nos conocimos jugando,
sin imaginar que ese era el
comienzo de nuestra.

Entre partidas y risas
encontr√© a mi calma,
mi persona favorita,
mi hogar, mi todo.

Gracias por dejarme ser 
parte de tu vida y por dejarme
estar a tu lado a lo largo de 
este a√±o y espero que sean muchos m√°s,
a pesar de todo lo que
hemos pasado... has sido el mejor 
regalo que me ha dado el universo.`;

const frase="Te amo Laura Guzman";
const fecha="12/12/2024 -";
const nombreLuz=document.getElementById("nombre-luz");

const fondo=document.getElementById("fondo");
const videoFondo=document.getElementById("videoFondo");
const sobre=document.getElementById("sobre");
const mensaje=document.getElementById("mensaje");
const mensaje2=document.getElementById("mensaje2");
const btn=document.getElementById("btn");
const btn2=document.getElementById("btn2");
const btn3=document.getElementById("btn3");
const music=document.getElementById("music");
const music2=document.getElementById("music2");
const papel=document.getElementById("papel");
const pluma=document.getElementById("pluma");
const firma=document.getElementById("firma");
const carta1=document.getElementById("carta1");
const carta2=document.getElementById("carta2");

let i=0,j=0,iniciado=false,segundaAbierta=false;

/* ---------- GLOBOS ---------- */
function crearGlobo(){
  const g=document.createElement("img");
  g.src="globo.png";
  g.className="globo";
  g.style.left=Math.random()*100+"vw";
  g.style.width=(60+Math.random()*50)+"px";
  g.style.setProperty("--deriva",(Math.random()*80-40)+"px");
  g.style.animationDuration=(14+Math.random()*10)+"s";
  document.body.appendChild(g);
  setTimeout(()=>g.remove(),24000);
}

let globosInterval=null;

/* ---------- TEXTO CARTA 1 ---------- */
function escribir(){
  if(i<texto.length){
    mensaje.textContent+=texto.charAt(i++);
    pluma.currentTime=0;
    pluma.play().catch(()=>{});
    setTimeout(escribir,45);
  }else{
    setTimeout(()=>{
      firma.style.opacity=1;
      firma.style.transform="translateY(0)";
      btn2.style.display="block";
    },600);
  }
}

/* ---------- TEXTO CARTA 2 ---------- */
function escribir2(){
  if(j < texto2.length){
    mensaje2.textContent += texto2.charAt(j++);
    pluma.currentTime = 0;
    pluma.play().catch(()=>{});
    setTimeout(escribir2, 45);
  } else {
    setTimeout(()=>{
      const firma2 = document.getElementById("firma2");
      firma2.style.opacity = 1;
      firma2.style.transform = "translateY(0)";
    }, 600);
  }
}


/* ---------- AUDIO ---------- */
function fadeOut(audio,callback){
  let v=audio.volume;
  const bajar=setInterval(()=>{
    if(v>0){
      v-=0.05;
      audio.volume=Math.max(v,0);
    }else{
      clearInterval(bajar);
      audio.pause();
      if(callback) callback();
    }
  },80);
}

function fadeIn(audio){
  audio.volume=0;
  audio.play().catch(()=>{});
  let v=0;
  const subir=setInterval(()=>{
    if(v<1){
      v+=0.05;
      audio.volume=Math.min(v,1);
    }else clearInterval(subir);
  },80);
}

function musicaSuave(){
  fadeIn(music);
}

/* ---------- TEXTO LUMINOSO ---------- */
function escribirFrase(){
  nombreLuz.textContent = "";
  nombreLuz.style.opacity = 1;
  nombreLuz.style.fontSize = "1.2em";
  nombreLuz.classList.remove("palpitar");

  let k = 0;

  // ESCRIBIR "TE AMO LAURA GUZMAN"
  const escribir = setInterval(() => {
    if (k < frase.length) {
      nombreLuz.textContent += frase.charAt(k++);
    } else {
      clearInterval(escribir);

      // ‚è≥ DURACI√ìN EN PANTALLA (7 segundos)
      setTimeout(() => {

        // DESVANECER TEXTO
        nombreLuz.style.transition = "opacity 2.5s ease";
        nombreLuz.style.opacity = 0;

        // ESPERAR A QUE TERMINE DE DESVANECER
        setTimeout(() => {

          // MOSTRAR FECHA PERMANENTE
          nombreLuz.innerHTML = `${fecha}<span class="infinito">‚àû</span>`;
          nombreLuz.style.fontSize = "1.5em";
          nombreLuz.style.opacity = 1;
          nombreLuz.classList.add("palpitar");

        }, 2600); // tiempo del fade out

      }, 7000); // 7 segundos
    }
  }, 220); // velocidad de escritura
}


/* ---------- ABRIR PRIMERA ---------- */
function abrir(){
  if(iniciado) return;
  iniciado=true;
  btn.classList.add("hide");
  document.body.classList.add("abierto");
  sobre.classList.add("abierto");
  setTimeout(()=>papel.play().catch(()=>{}),500);
  setTimeout(escribir,1300);
  setTimeout(musicaSuave,1600);
  setTimeout(escribirFrase,1800);
    // VIDEO EN LA PRIMERA CARTA
  fondo.style.opacity = 0;
  videoFondo.classList.add("video-activo");
  videoFondo.currentTime = 0;
  videoFondo.play().catch(()=>{});

}

/* ---------- ABRIR SEGUNDA ---------- */
function abrirSegunda(){
  if(segundaAbierta) return;
  segundaAbierta=true;
  btn2.classList.add("hide");
  btn3.style.display="block";
  // SONIDO PAPEL SEGUNDA CARTA
setTimeout(()=>{
  papel.currentTime = 0;
  papel.play().catch(()=>{});
}, 400);


  fadeOut(music,()=>{
    fadeIn(music2);
  });

    // IMAGEN EN LA SEGUNDA CARTA
  videoFondo.classList.remove("video-activo");
  fondo.style.opacity = 0.45;


  globosInterval=setInterval(crearGlobo,1400);

  carta1.style.opacity=0;
  carta1.style.transform="translateY(-20px)";
  setTimeout(()=>{
    carta1.style.pointerEvents="none";
    carta2.style.pointerEvents="auto";
    carta2.style.opacity=1;
    carta2.style.transform="translateY(0)";
    escribir2();
  },600);
}

/* ---------- VOLVER A PRIMERA ---------- */
function volverPrimera(){
  btn3.classList.add("hide");
  btn2.style.display="block";

  fadeOut(music2,()=>{
    fadeIn(music);
  });

  videoFondo.classList.remove("video-activo");
  fondo.style.opacity=0.45;

  clearInterval(globosInterval);

  carta2.style.opacity=0;
  carta2.style.transform="translateY(20px)";
  setTimeout(()=>{
    carta2.style.pointerEvents="none";
    carta1.style.pointerEvents="auto";
    carta1.style.opacity=1;
    carta1.style.transform="translateY(0)";
  },600);
}

/* ---------- ESTRELLAS ---------- */
for(let i=0;i<16;i++){
  const e=document.createElement("div");
  e.className="estrella";
  e.style.left=Math.random()*100+"vw";
  e.style.animationDuration=(6+Math.random()*5)+"s";
  document.documentElement.appendChild(e);
}
</script>

</body>
</html>
